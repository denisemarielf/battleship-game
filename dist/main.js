(()=>{var e={498:(e,t,n)=>{const a=n(680);e.exports=(e,t,n,o,r)=>{const l=[];for(let e=0;e<10;e++){l[e]=[];for(let t=0;t<10;t++)l[e][t]=null}const i=[a(1,e.x,e.y,e.alignment),a(2,t.x,t.y,t.alignment),a(3,n.x,n.y,n.alignment),a(4,o.x,o.y,o.alignment),a(5,r.x,r.y,r.alignment)];return i.forEach((e=>function(e){if("horizontal"===e.alignment)for(let t=0;t<e.length;t++)l[e.x+t][e.y]={ship:e.name,position:t};else for(let t=0;t<e.length;t++)l[e.x][e.y+t]={ship:e.name,position:t}}(e))),{grid:l,receiveAttack:(e,t)=>{if(null!==l[e][t])switch(l[e][t].ship){case"s1":i[0].hit(l[e][t].position),l[e][t]=!0;break;case"s2":i[1].hit(l[e][t].position),l[e][t]=!0;break;case"s3":i[2].hit(l[e][t].position),l[e][t]=!0;break;case"s4":i[3].hit(l[e][t].position),l[e][t]=!0;break;case"s5":i[4].hit(l[e][t].position),l[e][t]=!0}else l[e][t]=!1},isFleetSunk:()=>i.every((e=>!0===e.isSunk())),avaliableCoordinates:()=>{let e=[];for(var t=0;t<l.length;t++)for(var n=0;n<l[t].length;n++)!0!==l[t][n]&&!1!==l[t][n]&&e.push({x:t,y:n});return e}}}},507:e=>{e.exports=(e,t)=>"computer"===e?{computerAttack:()=>{let e=t.avaliableCoordinates(),n=e[Math.floor(Math.random()*e.length)];return t.receiveAttack(n.x,n.y),n}}:{playerAttack:(e,n)=>{t.receiveAttack(e,n)}}},680:e=>{e.exports=(e,t,n,a)=>{const o="s"+e,r=e,l=t,i=n,s=a;let c=[];for(let t=0;t<e;t++)c.push(!1);return{hit:e=>{c[e]=!0},isSunk:()=>c.every((e=>!0===e)),positions:c,name:o,length:r,x:l,y:i,alignment:s}}}},t={};function n(a){var o=t[a];if(void 0!==o)return o.exports;var r=t[a]={exports:{}};return e[a](r,r.exports,n),r.exports}(()=>{"use strict";const e=n(498),t=n(507);(()=>{const n=document.querySelector(".main-game-container"),a=document.querySelector(".main-modal-start-game"),o=document.querySelector(".main-game-container-player"),r=document.querySelector(".main-game-container-computer"),l=document.querySelector(".main-modal-end-game"),i=document.querySelector(".main-modal-end-game-button");let s;const c=()=>{r.textContent="",o.textContent="";const e=s.getPlayerGameboard(),t=s.getComputerGameboard(),n=(e,t,n)=>{for(var a=0;a<t.length;a++)for(var o=0;o<t[a].length;o++){let r=document.createElement("button");r.dataset.column=o,r.dataset.row=a,r.className="grid-item","player"===e&&!0!==t[o][a]&&!1!==t[o][a]&&null!==t[o][a]?(r.innerHTML="â¬¤",r.dataset.status="user-ship"):!0!==t[o][a]&&!1!==t[o][a]?r.dataset.status="free":t[o][a]?(r.innerHTML="â¬¤",r.dataset.status="hit"):(r.innerHTML="â¬¤",r.dataset.status="miss"),n.appendChild(r)}};n("player",e,o),n("computer",t,r)};r.addEventListener("click",(function(e){if("free"===e.target.dataset.status){const t=e.target.dataset.column,n=e.target.dataset.row;let a=s.playRound(t,n);"continue"===a?c():"player won"===a?(c(),f("player")):(c(),f("computer"))}}));const d=document.querySelector(".main-modal-start-game-grid"),u=[];for(let e=0;e<10;e++){u[e]=[];for(let t=0;t<10;t++)u[e][t]=null}for(let e=0;e<u.length;e++)for(let t=0;t<u[e].length;t++){let n=document.createElement("div");n.dataset.column=e,n.dataset.row=t,n.classList.add("start-grid-item"),d.appendChild(n)}function m(e){this.classList.add("dragging")}function p(e){this.classList.remove("dragging"),this.style.position="relative"}function y(e){e.preventDefault();const t=document.querySelector(".dragging");this.append(t)}let g=document.querySelectorAll(".ship");g.forEach((e=>{e.addEventListener("dragstart",m),e.addEventListener("dragend",p),e.addEventListener("click",(e=>{"vertical"===e.target.parentElement.dataset.position?e.target.parentElement.dataset.position="horizontal":e.target.parentElement.dataset.position="vertical"}))}));let h=document.querySelectorAll(".start-grid-item");function f(e){"player"===e?(document.querySelector(".end-game-message").innerHTML="You won ðŸŽ‰",document.querySelector(".main-game-container").style.position="relative",document.querySelector(".main-modal-end-game").style.display="flex"):(document.querySelector(".end-game-message").innerHTML="You lost ðŸ˜ª",document.querySelector(".main-game-container").style.position="relative",document.querySelector(".main-modal-end-game").style.display="flex")}h.forEach((e=>{e.addEventListener("dragover",y)})),document.querySelector(".main-modal-start-game-button").addEventListener("click",(function(o){g=document.querySelectorAll(".ship[data-type='real']");let r=[];if(null!==g[0].parentElement.getAttribute("data-row")?g.forEach((e=>{let t=parseInt(e.parentElement.getAttribute("data-row")),n=parseInt(e.parentElement.getAttribute("data-column")),a=e.getAttribute("data-position"),o=parseInt(e.getAttribute("id").slice(5,6));"horizontal"===a&&o+t>10||"vertical"===a&&o+n>10?document.querySelector("small").style.display="block":r.push({x:t,y:n,alignment:a,position:o})})):document.querySelector("small").style.display="block",5===r.length){let o=r.sort(((e,t)=>e.position>t.position?1:e.position<t.position?-1:0));s=(n=>{const a=()=>{const e=["vertical","horizontal"],t=e=>Math.floor(Math.random()*e);let n=[],a=[];function o(){for(let o=0;o<5;o++){let r={x:t(10),y:t(10),alignment:e[t(2)],position:o};if(n.push(r),"horizontal"===r.alignment)for(let e=0;e<=o;e++){let t=r.x,n=r.y;t+=e;let o=`{x: ${t}, y: ${n}}`;t<10&&!0!==a.includes(o)&&a.push(`{x: ${t}, y: ${n}}`)}else for(let e=0;e<=o;e++){let t=r.x,n=r.y;n+=e;let o=`{x: ${t}, y: ${n}}`;n<10&&!0!==a.includes(o)&&a.push(`{x: ${t}, y: ${n}}`)}}}do{a=[],n=[],o()}while(15!==a.length);if(15===a.length)return n};let o=a();const r=e(o[0],o[1],o[2],o[3],o[4]),l=e(n[0],n[1],n[2],n[3],n[4]),i=t("human",r),s=t("computer",l),c=[i,s];let d=c[0];const u=()=>{d=d===c[0]?c[1]:c[0]};return{getPlayerGameboard:()=>l.grid,getPlayerAvaliableCoordinates:()=>l.avaliableCoordinates(),getComputerGameboard:()=>r.grid,getCurrentPlayer:()=>d,playRound:(e,t)=>{if(d===c[0])return i.playerAttack(e,t),!0===r.isFleetSunk()?"player won":(u(),s.computerAttack(),!0===l.isFleetSunk()?"computer won":(u(),"continue"))},setRandomComputerCoordinates:a,computerCoordinates:o}})(o);const d=s.getPlayerGameboard();let u=[];for(var l=0;l<d.length;l++)for(var i=0;i<d[l].length;i++)null!==d[l][i]&&u.push({x:l,y:i});15===u.length?(c(),a.style.display="none",n.style.display="flex"):document.querySelector("small").style.display="block"}})),i.addEventListener("click",(function(){l.style.display="none",a.style.display="flex",n.style.display="none",document.querySelector("small").style.display="none",h.forEach((e=>{if(e.hasChildNodes()){let t=e.firstElementChild.getAttribute("id"),n=document.querySelector(`.${t}`).firstElementChild;e.firstElementChild.style.position="static",e.firstElementChild.dataset.position="horizontal",n.after(e.firstElementChild)}}))}))})()})()})();